{% extends "base.html" %}
{% load extras %}

{% block title %}{{ course.name }} â€” Trollingo{% endblock %}

{% block content %}
<section class="card">
  <div class="row" style="justify-content:space-between;">
    <div>
      <span class="kicker">ðŸ“š Kurs</span>
      <h2 class="card__title" style="margin-top:10px;">{{ course.name }}</h2>
      {% if course.description %}
        <p class="card__subtitle" style="margin-top:8px;">{{ course.description }}</p>
      {% endif %}
    </div>
    <a class="btn btn--ghost" href="{% url 'learning:course_list' %}">â¬… WrÃ³Ä‡</a>
  </div>

  <div style="height:16px;"></div>

  <h3 class="card__title" style="font-size:18px;">Lekcje wg poziomu</h3>

  {% regroup course.lessons.all by level as levels %}

  <div class="stack">
    {% for group in levels %}
      <div class="card" style="padding:14px;">
        <div class="row" style="justify-content:space-between;">
          <div>
            <div class="list__title">Poziom: {{ group.grouper }}</div>
            <div class="list__meta">Wybierz lekcjÄ™ i zrÃ³b quiz.</div>
          </div>
          <span class="badge badge--warn">LEVEL</span>
        </div>

        <div style="height:10px;"></div>

        <ul class="list">
          {% for lesson in group.list %}
            <li class="list__item">
              <div class="list__left">
                <a class="list__title" href="{% url 'learning:lesson_detail' lesson.pk %}">
                  {{ lesson.order }}. {{ lesson.title }}
                </a>
                <div class="list__meta">Kliknij, Å¼eby wejÅ›Ä‡ w lekcjÄ™</div>
              </div>

              {% if progress_map and lesson.id in progress_map %}
                <span class="badge badge--ok">âœ” ukoÅ„czono ({{ progress_map|get_score:lesson.id }} pkt)</span>
              {% else %}
                <a class="btn btn--primary" href="{% url 'learning:lesson_detail' lesson.pk %}">Start</a>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
